import{_ as B,d as N,r as q,o as F,c as L,a as U,b as M}from"./index.1f3074e7.js";const V=({dom:d,maps:f,hotSpots:h,coordinates:u})=>{const i=document.createElement("img");d.appendChild(i);const r=document.createElement("div");d.appendChild(r);const a=document.createElement("div"),n=document.createElement("div"),c=document.createElement("img"),l=document.createElement("img");let _,w,P,g,x;const A=t=>{const o=t.map(v=>v.x),e=t.map(v=>v.y),s=Math.max.apply(null,o),m=Math.min.apply(null,o),$=Math.max.apply(null,e),X=Math.min.apply(null,e);_=m,w=X,g=s-m,x=$-X,P=g/x},E=t=>{const{src:o,offsetX:e,offsetY:s,ratio:m,zoom:$}=t;i.src=new URL(o,import.meta.url).href,i.setAttribute("style",`position:absolute;left:${100*e}%;top:${100*s}%;width:${100*$}%;aspect-ratio:${m}`)},H=t=>{const{offsetX:o,offsetY:e,zoom:s}=t;r.setAttribute("style",`position:absolute;left:${100*o}%;top:${100*e}%;width:${100*s}%;aspect-ratio:${P}`)},Y=({x:t,y:o})=>({x:100*(t-_)/g,y:100*(o-w)/x}),I=({x:t,y:o,size:e})=>{const s=document.createElement("img");s.src=p.src,s.setAttribute("style",`position:absolute;left:${t}%;top:${o}% ;width:${e}px;height:${e}px;transform:translate(-50%,-50%);z-index:10;`),n.appendChild(s)};let y,b=!1;const p={size:6,src:""},k=({size:t,src:o})=>{n.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;"),n.setAttribute("id","hotSpotCanvas"),r.appendChild(n),p.size=t,p.src=o,y.forEach(e=>{I({size:p.size,...e})}),b=!0},S=()=>{const t=document.querySelector("#hotSpotCanvas"),o=(t==null?void 0:t.childNodes)||[];for(let e=o.length-1;e>=0;e--)t==null||t.removeChild(o[e]);y.forEach(e=>{I({size:p.size,...e})})},R=()=>{const t=document.querySelector("#hotSpotCanvas"),o=(t==null?void 0:t.childNodes)||[];for(let e=o.length-1;e>=0;e--)t==null||t.removeChild(o[e]);b=!1};let z,C;return{createHotSpots:k,updateHotSpots:S,deleteHotSpots:R,createCameraPosition:({positionData:t,angleData:o})=>{a.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%;"),a.setAttribute("id","cameraCanvas"),r.appendChild(a),z=t,c.src=new URL("/map-creator/static/position.7fff7a04.svg",self.location).href,a.appendChild(c),C=o,l.src=new URL("/map-creator/static/angle.66667a05.svg",self.location).href,a.appendChild(l)},updateCameraPosition:t=>{const{x:o,y:e}=Y(t);c.setAttribute("style",`position:absolute;left:${o}%;top:${e}% ;width:${z.size}px;height:${z.size}px;transform:translate(-50%,-50%);z-index:20;`),l.setAttribute("style",`position:absolute;left:calc(${o}% + 4px);top:calc(${e}%);width:${C.size}px;height:${C.size}px;transform:translateY(-50%) rotate(${360-t.angle*180/Math.PI-90}deg); transform-origin:-4px 50%;z-index:20;`)},deleteCameraPosition:()=>{const t=document.querySelector("#cameraCanvas"),o=(t==null?void 0:t.childNodes)||[];for(let e=o.length-1;e>=0;e--)t==null||t.removeChild(o[e])},setFloor:t=>{E(f[t]);const o=h.filter(e=>e.floor===t).map(({position:e})=>({x:e.x,y:e.y}));A(o),H(u[t]),y=o.map(e=>Y(e)),b&&S()}}},j="/map-creator/static/floor1.32d47092.svg",G="/map-creator/static/floor2.7808064f.svg",J="/map-creator/static/hot_spot.1fc41beb.svg",K="/map-creator/static/position.7fff7a04.svg",Q="/map-creator/static/angle.66667a05.svg",T={class:"fixed top-12 left-20 z-50 border-2 border-black w-1/4 h-1/4 rounded-2xl bg-black"},W=N({__name:"HomePage",setup(d){const f=[{position:{x:0,y:4},floor:0},{position:{x:1,y:2},floor:0},{position:{x:4,y:4.6},floor:0},{position:{x:8,y:5},floor:0},{position:{x:12,y:5.1},floor:0},{position:{x:16,y:4.9},floor:0},{position:{x:20,y:5.7},floor:0},{position:{x:24,y:6},floor:0}],h=[{src:j,ratio:1.5853,zoom:.7,offsetX:.2,offsetY:.05},{src:G,ratio:1.6222,zoom:1,offsetX:0,offsetY:0}],u=[{zoom:.7,offsetX:.22,offsetY:.33},{zoom:.5,offsetX:0,offsetY:0}],i=q(),r=()=>{const{setFloor:a,createHotSpots:n,createCameraPosition:c,updateCameraPosition:l}=V({dom:i.value,maps:h,hotSpots:f,coordinates:u});a(0),n({size:6,src:J}),c({positionData:{size:6,src:K},angleData:{size:20,src:Q}}),l({x:4,y:4.6,angle:0})};return F(async()=>{r()}),(a,n)=>(M(),L("div",T,[U("div",{ref_key:"mapDOM",ref:i,class:"absolute w-full h-full"},null,512)]))}}),ot=B(W,[["__file","/home/runner/work/map-creator/map-creator/src/views/HomePage.vue"]]);export{ot as default};
